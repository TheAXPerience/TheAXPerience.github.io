(this["webpackJsonpmystery-dungeon-quiz"]=this["webpackJsonpmystery-dungeon-quiz"]||[]).push([[0],{13:function(t,e,n){},14:function(t,e,n){},15:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),s=n(3),o=n.n(s),u=(n(13),n(1)),i=n(2),l=n(4),c=n(6),h=n(5);function m(t){var e=t.toLowerCase();return"./assets/".concat(e,"_portrait.png")}var d=function(){function t(e,n){Object(u.a)(this,t),this.question=e,this.answers=[];for(var a=0;a<n.length;a++)this.answers.push({text:n[a].text,points:n[a].points})}return Object(i.a)(t,[{key:"containsNatures",value:function(t){var e=this,n=!0;return t.forEach((function(t){var a=!1;e.answers.forEach((function(e){a|=e.points.includes(t)})),n&=a})),n}},{key:"getAnswers",value:function(){var t=[];return this.answers.forEach((function(e){t.push(e)})),t}},{key:"getNumAnswers",value:function(){return this.answers.length}},{key:"q",get:function(){return this.question}}]),t}(),f=function(){function t(){Object(u.a)(this,t),this.questions=[]}return Object(i.a)(t,[{key:"addQuestion",value:function(t){this.questions.push(new d(t.q,t.as))}},{key:"addQuestions",value:function(t){var e=this;t.forEach((function(t){e.addQuestion(t)}))}},{key:"getNext",value:function(){if(this.questions.length<=0)return null;var t=Math.floor(Math.random()*this.questions.length);return this.questions.splice(t,1)[0]}},{key:"hasNext",value:function(){return this.questions.length>0}},{key:"getLastQuestion",value:function(){return new d("Select your preferred pronouns.",[{text:"He/him",points:"he"},{text:"She/her",points:"she"},{text:"They/them",points:"they"}])}}]),t}(),v=function(){function t(){Object(u.a)(this,t),this.gender="he",this.counts={},this.flavor={},this.pokemon={}}return Object(i.a)(t,[{key:"addNature",value:function(t){var e=t.name;this.counts[e]=0,this.flavor[e]=t.flavor,this.pokemon[e]={he:t.he,she:t.she,they:t.they}}},{key:"addNatures",value:function(t){var e=this;t.forEach((function(t){e.addNature(t)}))}},{key:"getNature",value:function(){var t=this,e=[],n=-1;Object.keys(this.counts).forEach((function(a){t.counts[a]>n?(e=[a],n=t.counts[a]):t.counts[a]===n&&e.push(a)}));var a=e[Math.floor(Math.random()*e.length)];return{nature:a,pokemon:this.pokemon[a][this.gender],flavor:this.flavor[a]}}},{key:"addCounts",value:function(t){var e=this;t.split(" ").forEach((function(t){void 0===e.counts[t]&&t.length>0?e.gender=t:t.length>0&&(e.counts[t]+=1)}))}},{key:"resetCounts",value:function(){var t=this;Object.keys(this.counts).forEach((function(e){t.counts[e]=0})),this.gender="he"}},{key:"getAllCounts",value:function(){var t=this,e=[],n=0;return Object.keys(this.counts).forEach((function(e){n+=t.counts[e]})),Object.keys(this.counts).forEach((function(a){var r={nature:a,picture:m(t.pokemon[a][t.gender]),count:t.counts[a],percent:Math.round(t.counts[a]/n*100)};e.push(r)})),e.sort((function(t,e){return e.count-t.count})),e}}]),t}(),p=function(t){Object(c.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(u.a)(this,n),(a=e.call(this,t)).state={left:a.props.num,q_list:null,n_list:null,loading:!0},a.handleClick=a.handleClick.bind(Object(l.a)(a)),a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var t=this,e=new v,n=new f;fetch("./data/mysterydungeonquiz.json").then((function(t){return t.json()})).then((function(a){e.addNatures(a.personalities),n.addQuestions(a.questions),t.setState({left:t.state.left,q_list:n,n_list:e,loading:!1,num_question:1})}))}},{key:"handleClick",value:function(t){this.state.n_list.addCounts(t.target.dataset.value);var e=this.state.left-1,n=this.state.num_question+1;this.state.q_list.hasNext()||e<0?this.setState({left:e,q_list:this.state.q_list,n_list:this.state.n_list,loading:!1,num_question:n}):this.setState({left:0,q_list:this.state.q_list,n_list:this.state.n_list,loading:!1,num_question:n})}},{key:"render",value:function(){if(this.state.loading)return r.a.createElement("div",{id:"text-box"},r.a.createElement("h2",null,"Loading..."));var t=this.handleClick;if(this.state.left>0){var e=this.state.q_list.getNext(),n=1,a=e.getAnswers().map((function(e){var a=e.points,s=e.text;return r.a.createElement("a",{key:"a"+n++,"data-value":a,onClick:function(e){return t(e,"data-value")}},s)}));return r.a.createElement("div",{id:"text-box"},r.a.createElement("div",{className:"question"},r.a.createElement("h2",null,this.state.num_question,". ",e.q)),r.a.createElement("div",{className:"answers"},a))}if(0===this.state.left){var s=this.state.q_list.getLastQuestion(),o=1,u=s.getAnswers().map((function(e){var n=e.points,a=e.text;return r.a.createElement("a",{key:"a"+o++,"data-value":n,onClick:function(e){return t(e,"data-value")}},a)}));return r.a.createElement("div",{id:"text-box"},r.a.createElement("div",{className:"question"},r.a.createElement("h2",null,s.q)),r.a.createElement("div",{className:"answers"},u))}return r.a.createElement(E,{natures:this.state.n_list})}}]),n}(r.a.Component),E=function(t){Object(c.a)(n,t);var e=Object(h.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var t=1,e=this.props.natures.getNature(),n=this.props.natures.getAllCounts().map((function(e){return r.a.createElement("tr",{key:"n"+t++},r.a.createElement("td",null,e.nature),r.a.createElement("td",null,r.a.createElement("img",{src:e.picture,alt:e.nature})),r.a.createElement("td",null,e.count," (",e.percent,"%)"))}));return r.a.createElement("div",{id:"text-box"},r.a.createElement("h2",null,"You seem to be... the ",e.nature," type!"),r.a.createElement("p",null,e.flavor,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("img",{id:"portrait",src:m(e.pokemon),alt:e.pokemon}),r.a.createElement("br",null),"Will be a ",r.a.createElement("span",{className:"player"},e.pokemon),"!"),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Nature"),r.a.createElement("th",null,"Portrait"),r.a.createElement("th",null,"Points"))),r.a.createElement("tbody",null,n)))}}]),n}(r.a.Component);n(14);function y(t){var e=64;"random"===t.target.value&&(e=Math.floor(3*Math.random())+8),o.a.render(r.a.createElement(p,{num:e}),document.getElementById("root"))}var b=function(){return r.a.createElement("div",{id:"text-box"},r.a.createElement("h2",null,"Welcome!",r.a.createElement("br",null),"This is the portal that leads to the world inhabited only by Pokemon.",r.a.createElement("br",null),"Beyond this gateway, many new adventures and fresh experiences await your arrival!",r.a.createElement("br",null),"Before you depart for adventure, you must answer some questions.",r.a.createElement("br",null),"Be truthful when you answer them!",r.a.createElement("br",null),"Now, are you ready?",r.a.createElement("br",null),"Then..."),r.a.createElement("button",{type:"button",name:"button",value:"random",onClick:function(t){return y(t)}},"Let the questions begin!"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{type:"button",name:"button",value:"all",onClick:function(t){return y(t)}},"Take the full test!"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(b,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},8:function(t,e,n){t.exports=n(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.002bb741.chunk.js.map