(this["webpackJsonpmystery-dungeon-quiz"]=this["webpackJsonpmystery-dungeon-quiz"]||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(3),o=n.n(s),i=(n(13),n(1)),u=n(2),l=n(4),c=n(6),h=n(5);function d(e){var t=e.toLowerCase();return"./assets/".concat(t,"_portrait.png")}var f=function(){function e(t,n){Object(i.a)(this,e),this.question=t,this.answers=[];for(var a=0;a<n.length;a++)this.answers.push({text:n[a].text,points:n[a].points})}return Object(u.a)(e,[{key:"containsNatures",value:function(e){var t=this,n=!0;return e.forEach((function(e){var a=!1;t.answers.forEach((function(t){a|=t.points.includes(e)})),n&=a})),n}},{key:"getAnswers",value:function(){var e=[];return this.answers.forEach((function(t){e.push(t)})),e}},{key:"getNumAnswers",value:function(){return this.answers.length}},{key:"q",get:function(){return this.question}}]),e}(),m=function(){function e(){Object(i.a)(this,e),this.questions=[]}return Object(u.a)(e,[{key:"addQuestion",value:function(e){this.questions.push(new f(e.q,e.as))}},{key:"addQuestions",value:function(e){var t=this;e.forEach((function(e){t.addQuestion(e)}))}},{key:"getNext",value:function(){if(this.questions.length<=0)return null;var e=Math.floor(Math.random()*this.questions.length);return this.questions.splice(e,1)[0]}},{key:"hasNext",value:function(){return this.questions.length>0}},{key:"getLastQuestion",value:function(){return new f("Select your preferred pronouns.",[{text:"He/him",points:"he"},{text:"She/her",points:"she"},{text:"They/them",points:"they"}])}}]),e}(),v=function(){function e(){Object(i.a)(this,e),this.gender="he",this.counts={},this.flavor={},this.pokemon={}}return Object(u.a)(e,[{key:"addNature",value:function(e){var t=e.name;this.counts[t]=0,this.flavor[t]=e.flavor,this.pokemon[t]={he:e.he,she:e.she,they:e.they}}},{key:"addNatures",value:function(e){var t=this;e.forEach((function(e){t.addNature(e)}))}},{key:"getNature",value:function(){var e=this,t=[],n=-1;Object.keys(this.counts).forEach((function(a){e.counts[a]>n?(t=[a],n=e.counts[a]):e.counts[a]===n&&t.push(a)}));var a=t[Math.floor(Math.random()*t.length)];return{nature:a,pokemon:this.pokemon[a][this.gender],flavor:this.flavor[a]}}},{key:"addCounts",value:function(e){var t=this;e.split(" ").forEach((function(e){void 0===t.counts[e]&&e.length>0?t.gender=e:e.length>0&&(t.counts[e]+=1)}))}},{key:"resetCounts",value:function(){var e=this;Object.keys(this.counts).forEach((function(t){e.counts[t]=0})),this.gender="he"}},{key:"getAllCounts",value:function(){var e=this,t=[],n=0;return Object.keys(this.counts).forEach((function(t){n+=e.counts[t]})),Object.keys(this.counts).forEach((function(a){var r={nature:a,picture:d(e.pokemon[a][e.gender]),count:e.counts[a],percent:Math.round(e.counts[a]/n*100)};t.push(r)})),t.sort((function(e,t){return t.count-e.count})),t}}]),e}(),p=function(e){Object(c.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={left:Math.floor(3*Math.random())+8,q_list:null,n_list:null,loading:!0},a.handleClick=a.handleClick.bind(Object(l.a)(a)),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=new v,n=new m;fetch("./assets/mysterydungeonquiz.json").then((function(e){return e.json()})).then((function(a){t.addNatures(a.personalities),n.addQuestions(a.questions),e.setState({left:e.state.left,q_list:n,n_list:t,loading:!1})}))}},{key:"handleClick",value:function(e){if(this.state.n_list.addCounts(e.target.dataset.value),console.log(e.target.dataset.value),this.state.q_list.hasNext()){var t=this.state.left-1;this.setState({left:t,q_list:this.state.q_list,n_list:this.state.n_list,loading:!1})}else this.setState({left:0,q_list:this.state.q_list,n_list:this.state.n_list,loading:!1})}},{key:"render",value:function(){if(this.state.loading)return r.a.createElement("div",{id:"text-box"},"Loading...");var e=this.handleClick;if(this.state.left>0){var t=this.state.q_list.getNext(),n=1,a=t.getAnswers().map((function(t){var a=t.points,s=t.text;return r.a.createElement("div",{key:"a"+n++,"data-value":a,onClick:function(t){return e(t,"data-value")}},s)}));return r.a.createElement("div",{id:"text-box"},r.a.createElement("div",{className:"question"},r.a.createElement("h2",null,t.q)),r.a.createElement("div",{className:"answers"},a))}if(0===this.state.left){var s=this.state.q_list.getLastQuestion(),o=1,i=s.getAnswers().map((function(t){var n=t.points,a=t.text;return r.a.createElement("div",{key:"a"+o++,"data-value":n,onClick:function(t){return e(t,"data-value")}},a)}));return r.a.createElement("div",{id:"text-box"},r.a.createElement("div",{className:"question"},r.a.createElement("h2",null,s.q)),r.a.createElement("div",{className:"answers"},i))}return r.a.createElement(y,{natures:this.state.n_list})}}]),n}(r.a.Component),y=function(e){Object(c.a)(n,e);var t=Object(h.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=1,t=this.props.natures.getNature(),n=this.props.natures.getAllCounts().map((function(t){return r.a.createElement("tr",{key:"n"+e++},r.a.createElement("td",null,t.nature),r.a.createElement("td",null,r.a.createElement("img",{src:t.picture,alt:t.nature})),r.a.createElement("td",null,t.count," (",t.percent,")"))}));return r.a.createElement("div",{id:"text-box"},r.a.createElement("h2",null,"You seem to be... the ",t.nature," type!"),r.a.createElement("p",null,t.flavor,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("img",{id:"portrait",src:d(t.pokemon),alt:t.pokemon}),r.a.createElement("br",null),"Will be a ",r.a.createElement("span",{className:"player"},t.pokemon),"!"),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Nature"),r.a.createElement("th",null,"Portrait"),r.a.createElement("th",null,"Points"))),r.a.createElement("tbody",null,n)))}}]),n}(r.a.Component);n(14);function E(){o.a.render(r.a.createElement(p,null),document.getElementById("root"))}var g=function(){return r.a.createElement("div",{id:"text-box"},r.a.createElement("h2",null,"Welcome!",r.a.createElement("br",null),"This is the portal that leads to the world inhabited only by Pokemon.",r.a.createElement("br",null),"Beyond this gateway, many new adventures and fresh experiences await your arrival!",r.a.createElement("br",null),"Before you depart for adventure, you must answer some questions.",r.a.createElement("br",null),"Be truthful when you answer them!",r.a.createElement("br",null),"Now, are you ready?",r.a.createElement("br",null),"Then..."),r.a.createElement("button",{type:"button",name:"button",onClick:E},"Let the questions begin!"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(g,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},8:function(e,t,n){e.exports=n(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.4fc6a866.chunk.js.map